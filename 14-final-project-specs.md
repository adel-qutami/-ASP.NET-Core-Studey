# 14-final-project-specs.md

# مواصفات مشروع "نظام إدارة المتجر الإلكتروني"

## المقدمة

بعد استكشاف المفاهيم الأساسية والمتقدمة في ASP.NET Core، حان الوقت لتطبيق هذه المعرفة في مشروع عملي شامل. هذا المشروع سيمكنك من دمج كل ما تعلمته لبناء نظام Back-end كامل لمتجر إلكتروني، مع التركيز على تصميم API نظيف، أمان، أداء، وقابلية للتوسع.

## 1. نظرة عامة على المشروع

سنقوم ببناء واجهة برمجة تطبيقات (Web API) لإدارة متجر إلكتروني. سيتضمن النظام إدارة المنتجات، المستخدمين، الطلبات، وعربة التسوق. سيتم تصميم الـ API ليكون RESTful قدر الإمكان، مع استخدام أحدث ميزات ASP.NET Core.

## 2. المتطلبات الوظيفية (Functional Requirements)

### أ. إدارة المستخدمين (User Management)

*   **تسجيل المستخدمين:** إنشاء حسابات جديدة (اسم مستخدم، بريد إلكتروني، كلمة مرور).
*   **تسجيل الدخول:** مصادقة المستخدمين وإرجاع رمز JWT.
*   **إدارة الملف الشخصي:** عرض وتحديث معلومات المستخدم (باستثناء كلمة المرور).
*   **إدارة الأدوار:** دعم أدوار `Admin` و `Customer`.

### ب. إدارة المنتجات (Product Management)

*   **إضافة منتج:** (Admin Only) إضافة منتج جديد (اسم، وصف، سعر، كمية، فئة).
*   **عرض المنتجات:** عرض جميع المنتجات أو منتج معين.
*   **تحديث منتج:** (Admin Only) تحديث معلومات منتج موجود.
*   **حذف منتج:** (Admin Only) حذف منتج.
*   **البحث والتصفية:** البحث عن المنتجات بالاسم، الفئة، أو نطاق السعر.

### ج. إدارة عربة التسوق (Shopping Cart Management)

*   **إضافة منتج إلى العربة:** إضافة منتج بكمية محددة إلى عربة تسوق المستخدم.
*   **عرض العربة:** عرض محتويات عربة التسوق للمستخدم.
*   **تحديث كمية المنتج في العربة:** تغيير كمية منتج معين في العربة.
*   **إزالة منتج من العربة:** حذف منتج من العربة.
*   **مسح العربة:** إفراغ عربة التسوق بالكامل.

### د. إدارة الطلبات (Order Management)

*   **إنشاء طلب:** تحويل محتويات عربة التسوق إلى طلب جديد.
*   **عرض الطلبات:** عرض جميع طلبات المستخدم أو طلب معين.
*   **تحديث حالة الطلب:** (Admin Only) تحديث حالة الطلب (قيد المعالجة، تم الشحن، تم التسليم، ملغى).

## 3. المتطلبات غير الوظيفية (Non-Functional Requirements)

*   **الأمان:** استخدام JWT للمصادقة، وتطبيق التفويض بناءً على الأدوار. حماية نقاط النهاية الحساسة.
*   **الأداء:** استجابات سريعة (أقل من 200ms للطلبات العادية). استخدام التخزين المؤقت حيثما أمكن.
*   **قابلية التوسع:** تصميم يسمح بإضافة ميزات جديدة بسهولة.
*   **قابلية الصيانة:** كود نظيف، منظم، وموثق.
*   **قابلية الاختبار:** تغطية جيدة باختبارات الوحدة.
*   **التسجيل والمراقبة:** تسجيل الأخطاء والأحداث الهامة. استخدام Health Checks.

## 4. التقنيات المستخدمة

*   **اللغة:** C#
*   **إطار العمل:** ASP.NET Core Web API (أحدث إصدار)
*   **قاعدة البيانات:** SQL Server (أو PostgreSQL/SQLite للاختبار المحلي)
*   **ORM:** Entity Framework Core
*   **المصادقة/التفويض:** JWT Bearer Authentication, ASP.NET Core Identity (اختياري لإدارة المستخدمين)
*   **التحقق من البيانات:** Data Annotations أو Fluent Validation
*   **التخزين المؤقت:** In-Memory Caching (أو Redis للتخزين الموزع)
*   **المهام الخلفية:** Hangfire (لإرسال رسائل البريد الإلكتروني، تحديث المخزون، إلخ)
*   **اختبارات الوحدة:** xUnit, Moq
*   **هيكلية المشروع:** Clean Architecture (أو Onion Architecture)

## 5. هيكلية المشروع المقترحة (Clean Architecture)

```
ECommerceSolution/
├── src/
│   ├── ECommerce.Domain/         # الكيانات، الواجهات، قواعد العمل
│   ├── ECommerce.Application/    # حالات الاستخدام (Commands, Queries, Handlers), DTOs
│   ├── ECommerce.Infrastructure/ # تطبيقات الواجهات (EF Core, Repositories), خدمات خارجية
│   └── ECommerce.Api/            # Controllers, Startup, Configuration
└── tests/
    ├── ECommerce.Application.Tests/ # اختبارات الوحدة لطبقة التطبيق
    └── ECommerce.Domain.Tests/      # اختبارات الوحدة لطبقة المجال
```

## 6. خطوات التنفيذ المقترحة

1.  **إعداد الحل والمشاريع:** إنشاء الحل والمشاريع الأربعة (Domain, Application, Infrastructure, Api) باستخدام .NET CLI.
2.  **تصميم الـ Domain Layer:** تعريف الكيانات الأساسية (User, Product, CartItem, Order, OrderItem).
3.  **إعداد قاعدة البيانات و EF Core:** تكوين `ApplicationDbContext`، إضافة Migrations، وتحديث قاعدة البيانات.
4.  **تطبيق User Management:** بناء نقاط نهاية تسجيل الدخول والتسجيل، وتوليد JWT.
5.  **تطبيق Product Management:** بناء نقاط نهاية CRUD للمنتجات.
6.  **تطبيق Shopping Cart:** بناء منطق عربة التسوق.
7.  **تطبيق Order Management:** بناء منطق إنشاء الطلبات وعرضها.
8.  **تطبيق Validation & Error Handling:** إضافة قواعد التحقق ومعالجة الأخطاء.
9.  **تطبيق Authentication & Authorization:** حماية نقاط النهاية باستخدام JWT والأدوار.
10. **إضافة Logging & Monitoring:** تكوين التسجيل و Health Checks.
11. **تحسين الأداء (Caching):** تطبيق التخزين المؤقت على نقاط النهاية المناسبة.
12. **إضافة Background Tasks (اختياري):** استخدام Hangfire لمهام مثل إرسال رسائل تأكيد الطلب.
13. **كتابة اختبارات الوحدة:** تغطية منطق العمل الأساسي باختبارات الوحدة.
14. **النشر (Deployment):** إعداد التطبيق للنشر باستخدام Docker.

## 7. مخرجات المشروع

*   كود مصدر كامل لتطبيق ASP.NET Core Web API يتبع Clean Architecture.
*   ملفات `Dockerfile` لـ Dockerization.
*   مجموعة من اختبارات الوحدة.
*   ملف `README.md` يوضح كيفية تشغيل المشروع واختباره.

هذا المشروع سيوفر لك خبرة عملية قيمة في بناء تطبيقات Back-end قوية باستخدام ASP.NET Core، وسيكون إضافة ممتازة لمحفظتك المهنية.
